# Git related
alias g='noglob git'
alias gb='g branch'
alias gp='g push origin `current_branch`'
alias gpt='bundle exec rake test && bundle exec rake jshint && g push origin `current_branch`'
alias gc='g c'
alias gst='g st -s'
alias gaa='g add --all'
alias ga='g add'
alias gup='g up'
alias glg='g lg'
alias gdfc='g diff --cached --color-words --patience'
alias gdf='g diff --color-words --patience'
alias hpr='hub pull-request -b'
alias hlog='heroku logs -t -a'
alias hlg='heroku logs -t'
alias hconf='heroku config -a'
alias hp='g push heroku `current_branch`:master'
alias current_branch="git rev-parse --abbrev-ref HEAD"
alias magnetic_repo_name="git remote show origin -n | grep 'Fetch' | ruby -e 'puts \$stdin.read.match(/Magnetic\/(.*)\.git/)[1]'"
alias last_commit="git rev-parse HEAD"
alias mysql="mysql -uroot"

function create-remote-branch {
  git checkout -b $1 && git push origin $1
}

function gph {
  git push $1 `current_branch`:master
}

# Code review tool
alias gp='g push origin `current_branch`'
alias current_branch="git rev-parse --abbrev-ref HEAD"
alias last_commit_message_long="git --no-pager log -1 --pretty=%B"
alias last_commit_message_short="git --no-pager log -1 --pretty=%s"
alias previous_commit_hash="git rev-parse HEAD~1"
function review {
  gp
  codereview --rev HEAD~1 \
    --title="`last_commit_message_short`" \
    --message="Repo: `magnetic_repo_name`
Branch: `current_branch`

`last_commit_message_long`" \
    --reviewers=CJ,fabio,stephen,rob --send_mail
}
function ammend_review {
  if [ $# -eq 1 ]; then
    gp
    codereview --rev HEAD~1 \
      --issue=$1 \
      --title="`last_commit_message_short`" \
    --message="Repo: `magnetic_repo_name`
Branch: `current_branch`

`last_commit_message_long`" \
      --reviewers=CJ,fabio,rob --send_mail
  else
    echo "Usage: $0 4590002"
  fi
}

# Zsh
alias zr='source ~/.zshrc'
alias ze='vim ~/.zshrc'
alias zexports='vim ~/.zsh/zsh-exports'
alias zaliases='vim ~/.zsh/zsh-aliases'

# Typos
alias cl='clear'
alias clar='clear'
alias dofiles='dotfiles'

# Shortcuts
alias rapps='cd ~/Documents/rails-apps'
alias dev='cd ~/Documents/development'
alias mag='cd ~/Documents/development/magnetic'
alias devops='cd ~/Documents/devops'
alias dotfiles='cd ~/dotfiles && vim . && cd -'
alias godev='cd $GOPATH/src/github.com/maliciousmind'

#alias vim='vim -w ~/.vimlog "$@"'
#alias tmux="tmux -2"
alias http='noglob http'
alias docs='cd ~/Documents'
alias upgradeall='upgrade_oh_my_zsh && brew update && brew upgrade && rvm get head'

# Rails
alias rake='noglob rake'
alias rdb='rake db:migrate'
alias be='bundle exec'
alias beg='bundle exec guard -c'
alias rs='bundle exec rails server --binding 127.0.0.1'
